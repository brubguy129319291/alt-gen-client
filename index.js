const express = require("express")
const axios = require("axios")

//const deobfuscate = require("./utilities/obfuscator.js")
const getLink = require("./utilities/getLaunchData.js")

const app = express()
const PORT = 3000

app.use(express.static(__dirname+"/client"))

//`https://eclipsis-alt-gen.herokuapp.com/getToken/${id}`
//`http://localhost:5000/getToken/${id}`

//we have to obfuscate this part as we obfuscate our cookies and it would be very bad if the deobfuscator was in the source code.
const _0x108c=['Y69c/p0`i5','U`Wzmu)JxW','uU\x27nW$@**J','wG#t7mhcyE','.iT&i*JQ3W','HvBzqSsW#q','BoIMX#\x27XN~','GET','data','1X4$W0qS$B','tcNkekme%I','slice','get','XlAVB%FVsA','*$~SBp!6jh','aUw@rbvofo','o02c&^tq\x27.','~*K^p86f*@','1GKIIIY','E&l2(aYtd&','entries','#(S&@&)%6,','kcuG@Rsigj','159ONhewC','/KBts.e9^u','dzDW%i,d,#','23378UQXiNg','hpV!z1bo%b','(*J%.p5SZc','ys?1J@F@E4','300431hJrnSr','3195MDBkmt','An\x20invalid\x20id\x20was\x20used.','success','22pcRFkG','xD2,kACLoV','<!DOCTYPE\x20html>\x0a\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<title>Apathy\x20|\x20Alt\x20Generator</title>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--favicon-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<link\x20rel=\x22shortcut\x20icon\x22\x20type=\x22image/jpg\x22\x20href=\x22/images/icon.png\x22/>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--Style-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<link\x20rel=\x22stylesheet\x22\x20href=\x22/public/style.css\x22>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--Main-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20window.location.href\x20=\x20\x22','Gyuxbf63Ws','1NaGtEWSXm','M7SmbGLa!k','WM731)KyV?','27upBWADzh','YVr/la,fpD','x\x278&H8oXht','join','$mAVC^HlI\x27','Drvl,W?mYF','params','z#ORwm8*1w','IAAH)?nTEm','push','M%D@I0Xns,','O\x278k\x27(Hz16','\x20was\x20used.','WSCAuwg%c&','c8Q^YoQb`%','send','20nAQcxN','Abq#Gsgau,','xgITb)@4&&','751395MdYOHU','B!~S?dy\x278B','k)hUdvvmsb','GdWI9n^PIW','./WHpwyt6#','ln\x27fvMa~Qz','PcXCt7HNfG','/:id','6373BLjrLi','?GEr$*eUet','83F/zV!~*K','RdTUZi0Pxg','Could\x20not\x20get\x20launch\x20data.','%OvcmrV%d\x27','length','1f1puTG6GV','U3\x271I,$fZ%','log','crv.e%!YMx','k6p9Q@j9OV','placeId','851224cypVFg','171155QezVSF','No\x20Response\x20from\x20server,\x20the\x20server\x20might\x20be\x20down.','w?Sy$.uf9@','4oLG*F^z#T','A@^j&9Og2l'];const _0x41dbd6=_0x4a5d;(function(_0xd9eb59,_0x2666a0){const _0x3d405a=_0x4a5d;while(!![]){try{const _0x698a62=parseInt(_0x3d405a(0x15b))*-parseInt(_0x3d405a(0x172))+parseInt(_0x3d405a(0x199))*parseInt(_0x3d405a(0x17a))+parseInt(_0x3d405a(0x182))*-parseInt(_0x3d405a(0x1a4))+parseInt(_0x3d405a(0x15a))+-parseInt(_0x3d405a(0x17e))+-parseInt(_0x3d405a(0x19c))+parseInt(_0x3d405a(0x17f))*parseInt(_0x3d405a(0x177));if(_0x698a62===_0x2666a0)break;else _0xd9eb59['push'](_0xd9eb59['shift']());}catch(_0x54d543){_0xd9eb59['push'](_0xd9eb59['shift']());}}}(_0x108c,0x712f2));const keys={'A':_0x41dbd6(0x157),'B':_0x41dbd6(0x171),'C':_0x41dbd6(0x16d),'D':_0x41dbd6(0x186),'E':'0zW331yFex','F':_0x41dbd6(0x18b),'G':_0x41dbd6(0x162),'H':_0x41dbd6(0x188),'I':_0x41dbd6(0x185),'J':_0x41dbd6(0x161),'K':_0x41dbd6(0x18d),'L':_0x41dbd6(0x166),'M':_0x41dbd6(0x163),'N':_0x41dbd6(0x175),'O':_0x41dbd6(0x196),'P':_0x41dbd6(0x18a),'Q':_0x41dbd6(0x17d),'R':_0x41dbd6(0x19f),'S':_0x41dbd6(0x15f),'T':'Ac%NP&0TL%','U':_0x41dbd6(0x1a0),'V':_0x41dbd6(0x1a5),'W':_0x41dbd6(0x193),'X':_0x41dbd6(0x17b),'Y':_0x41dbd6(0x1a7),'Z':_0x41dbd6(0x158),'a':_0x41dbd6(0x173),'b':'rD1zS7Yy~X','c':_0x41dbd6(0x187),'d':_0x41dbd6(0x189),'e':_0x41dbd6(0x19a),'f':_0x41dbd6(0x160),'g':_0x41dbd6(0x179),'h':_0x41dbd6(0x1a9),'i':_0x41dbd6(0x191),'j':'j*0ydo2xiA','k':_0x41dbd6(0x1a2),'l':_0x41dbd6(0x18e),'m':_0x41dbd6(0x194),'n':_0x41dbd6(0x178),'o':_0x41dbd6(0x176),'p':'D,BGZYGb$b','q':_0x41dbd6(0x190),'r':'W^mo,mXI1W','s':'yVv!X.T7ir','t':'TcNt^kmZA6','u':_0x41dbd6(0x16e),'v':_0x41dbd6(0x1ab),'w':'MgGhy3o3?c','x':_0x41dbd6(0x17c),'y':_0x41dbd6(0x19e),'z':'%ADpz~HubQ','0':_0x41dbd6(0x197),'1':_0x41dbd6(0x1a1),'2':_0x41dbd6(0x1ac),'3':_0x41dbd6(0x183),'4':_0x41dbd6(0x170),'5':_0x41dbd6(0x16f),'6':'kyb^h4q6ad','7':_0x41dbd6(0x19d),'8':_0x41dbd6(0x16a),'9':_0x41dbd6(0x1a6),'\x20':_0x41dbd6(0x169),'_':_0x41dbd6(0x165),':':_0x41dbd6(0x15d),'|':_0x41dbd6(0x164),'-':_0x41dbd6(0x19b),'.':_0x41dbd6(0x15e)};function _0x4a5d(_0x1d2535,_0x4cd0b2){_0x1d2535=_0x1d2535-0x157;let _0x108ccc=_0x108c[_0x1d2535];return _0x108ccc;}function deobfuscate(_0x223b49){const _0x3c55f4=_0x41dbd6;let _0x264d90=[],_0x306882=0x0;for(let _0xb460d3=0x0;_0xb460d3<=_0x223b49[_0x3c55f4(0x1aa)];_0xb460d3+=0xa){const _0x530aaa=_0x223b49[_0x3c55f4(0x16b)](_0x306882,_0xb460d3);for(const [_0x17b80d,_0x38d766]of Object[_0x3c55f4(0x174)](keys)){if(_0x38d766==_0x530aaa){_0x264d90[_0x3c55f4(0x192)](_0x17b80d);break;}}_0x306882=_0xb460d3;}return _0x264d90[_0x3c55f4(0x18c)]('');}app[_0x41dbd6(0x16c)](_0x41dbd6(0x1a3),async(_0x5b922a,_0x37020e)=>{const _0x4b13d5=_0x41dbd6,_0x20a87e=_0x5b922a[_0x4b13d5(0x18f)]['id'],_0x53daaa=await axios('https://eclipsis-alt-gen.herokuapp.com/getToken/'+_0x20a87e,{'method':_0x4b13d5(0x167)});if(!_0x53daaa[_0x4b13d5(0x168)])return console[_0x4b13d5(0x1ad)](_0x4b13d5(0x15c));if(!_0x53daaa[_0x4b13d5(0x168)][_0x4b13d5(0x181)])return console[_0x4b13d5(0x1ad)](_0x4b13d5(0x180));const _0x830b09=deobfuscate(_0x53daaa[_0x4b13d5(0x168)]['result']),_0x1ddf56=_0x53daaa['data'][_0x4b13d5(0x159)]||0x25b4538e,_0x39d9e5=await getLink(_0x830b09,_0x1ddf56);if(!_0x39d9e5[0x0])return console[_0x4b13d5(0x1ad)](_0x4b13d5(0x1a8));console[_0x4b13d5(0x1ad)](_0x20a87e+_0x4b13d5(0x195)),_0x37020e[_0x4b13d5(0x198)](_0x4b13d5(0x184)+_0x39d9e5[0x1]+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</script>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>');});

const listener = app.listen(PORT, () => {
    console.log(`Apathy Client is listening on port ${listener.address().port}`);
})